/**
 * RenoAI - Dark Mode Theme
 * Styles spécifiques au mode sombre
 */

/* ============================================
   ACTIVATION DU DARK MODE
   ============================================ */

/* Via attribut data-theme */
[data-theme="dark"] {
    color-scheme: dark;
}

/* Via classe .dark */
.dark {
    color-scheme: dark;
}

/* Via préférence système */
@media (prefers-color-scheme: dark) {
    :root:not([data-theme="light"]) {
        color-scheme: dark;

        /* Surfaces */
        --color-surface: #0f172a;
        --color-surface-elevated: #1e293b;
        --color-surface-hover: #334155;
        --color-surface-active: #475569;
        --color-surface-overlay: rgba(0, 0, 0, 0.7);

        /* Bordures */
        --color-border: #334155;
        --color-border-light: #1e293b;
        --color-border-dark: #475569;

        /* Texte */
        --color-text: #f8fafc;
        --color-text-secondary: #e2e8f0;
        --color-text-muted: #94a3b8;
        --color-text-disabled: #64748b;
        --color-text-inverse: #0f172a;

        /* Background */
        --color-background: #020617;
        --color-background-alt: #0f172a;

        /* États dark */
        --color-warning-dark: #fbbf24;
        --color-error-dark: #fca5a5;
    }
}

/* ============================================
   COMPOSANTS DARK MODE
   ============================================ */

[data-theme="dark"],
.dark {
    /* Body */
    background-color: var(--color-background);
    color: var(--color-text);

    /* ============================================
       SIDEBAR
       ============================================ */

    .sidebar {
        background-color: var(--color-surface);
        border-right-color: var(--color-border);
    }

    .sidebar-header {
        border-bottom-color: var(--color-border);
    }

    .nav-item {
        color: var(--color-text-muted);
    }

    .nav-item:hover {
        background-color: var(--color-surface-hover);
        color: var(--color-text);
    }

    .nav-item.active {
        background-color: rgba(37, 99, 235, 0.15);
        color: var(--color-primary-light);
    }

    .nav-section-title {
        color: var(--color-text-disabled);
    }

    .user-card {
        background-color: var(--color-surface-elevated);
        border-color: var(--color-border);
    }

    .user-card:hover {
        background-color: var(--color-surface-hover);
    }

    /* ============================================
       HEADER
       ============================================ */

    .header {
        background-color: var(--color-surface);
        border-bottom-color: var(--color-border);
    }

    .page-title {
        color: var(--color-text);
    }

    .header-search {
        background-color: var(--color-surface-elevated);
        border-color: var(--color-border);
    }

    .header-search input {
        color: var(--color-text);
    }

    .header-search input::placeholder {
        color: var(--color-text-disabled);
    }

    .icon-btn {
        color: var(--color-text-muted);
    }

    .icon-btn:hover {
        background-color: var(--color-surface-hover);
        color: var(--color-text);
    }

    /* ============================================
       CARDS
       ============================================ */

    .card,
    .stat-card,
    .project-card,
    .devis-card {
        background-color: var(--color-surface);
        border-color: var(--color-border);
    }

    .card:hover,
    .stat-card:hover,
    .project-card:hover {
        border-color: var(--color-border-dark);
        box-shadow: var(--shadow-lg);
    }

    .card-header {
        border-bottom-color: var(--color-border);
    }

    .card-footer {
        border-top-color: var(--color-border);
        background-color: var(--color-surface-elevated);
    }

    /* ============================================
       FORMULAIRES
       ============================================ */

    input,
    textarea,
    select {
        background-color: var(--color-surface-elevated);
        border-color: var(--color-border);
        color: var(--color-text);
    }

    input:focus,
    textarea:focus,
    select:focus {
        border-color: var(--color-primary);
        box-shadow: var(--focus-ring);
    }

    input::placeholder,
    textarea::placeholder {
        color: var(--color-text-disabled);
    }

    input:disabled,
    textarea:disabled,
    select:disabled {
        background-color: var(--color-surface);
        color: var(--color-text-disabled);
    }

    label {
        color: var(--color-text-secondary);
    }

    .form-group .helper-text {
        color: var(--color-text-muted);
    }

    .form-group .error-text {
        color: var(--color-error-light);
    }

    /* ============================================
       BOUTONS
       ============================================ */

    .btn-secondary,
    .btn-outline {
        background-color: transparent;
        border-color: var(--color-border);
        color: var(--color-text);
    }

    .btn-secondary:hover,
    .btn-outline:hover {
        background-color: var(--color-surface-hover);
        border-color: var(--color-border-dark);
    }

    .btn-ghost {
        color: var(--color-text-muted);
    }

    .btn-ghost:hover {
        background-color: var(--color-surface-hover);
        color: var(--color-text);
    }

    /* ============================================
       TABLEAUX
       ============================================ */

    table {
        background-color: var(--color-surface);
    }

    thead {
        background-color: var(--color-surface-elevated);
    }

    th {
        color: var(--color-text-muted);
        border-bottom-color: var(--color-border);
    }

    td {
        border-bottom-color: var(--color-border);
        color: var(--color-text);
    }

    tbody tr:hover {
        background-color: var(--color-surface-hover);
    }

    /* ============================================
       MODALS
       ============================================ */

    .modal-overlay {
        background-color: var(--color-surface-overlay);
    }

    .modal-content {
        background-color: var(--color-surface);
        border-color: var(--color-border);
    }

    .modal-header {
        border-bottom-color: var(--color-border);
    }

    .modal-footer {
        border-top-color: var(--color-border);
        background-color: var(--color-surface-elevated);
    }

    .modal-close {
        color: var(--color-text-muted);
    }

    .modal-close:hover {
        color: var(--color-text);
        background-color: var(--color-surface-hover);
    }

    /* ============================================
       DROPDOWN / SELECT
       ============================================ */

    .dropdown-menu {
        background-color: var(--color-surface);
        border-color: var(--color-border);
        box-shadow: var(--shadow-lg);
    }

    .dropdown-item {
        color: var(--color-text);
    }

    .dropdown-item:hover {
        background-color: var(--color-surface-hover);
    }

    .dropdown-divider {
        border-color: var(--color-border);
    }

    /* ============================================
       TABS
       ============================================ */

    .tabs {
        border-bottom-color: var(--color-border);
    }

    .tab {
        color: var(--color-text-muted);
    }

    .tab:hover {
        color: var(--color-text);
    }

    .tab.active {
        color: var(--color-primary-light);
        border-bottom-color: var(--color-primary-light);
    }

    /* ============================================
       BADGES & TAGS
       ============================================ */

    .badge {
        background-color: var(--color-surface-elevated);
        color: var(--color-text-muted);
    }

    .badge-primary {
        background-color: rgba(59, 130, 246, 0.2);
        color: var(--color-primary-light);
    }

    .badge-success {
        background-color: var(--color-success-bg);
        color: var(--color-success-light);
    }

    .badge-warning {
        background-color: var(--color-warning-bg);
        color: var(--color-warning-light);
    }

    .badge-error {
        background-color: var(--color-error-bg);
        color: var(--color-error-light);
    }

    /* ============================================
       TOOLTIPS
       ============================================ */

    .tooltip {
        background-color: var(--color-surface-elevated);
        color: var(--color-text);
        border-color: var(--color-border);
    }

    /* ============================================
       ALERTS / NOTIFICATIONS
       ============================================ */

    .alert {
        background-color: var(--color-surface-elevated);
        border-color: var(--color-border);
    }

    .alert-success {
        background-color: var(--color-success-bg);
        border-color: var(--color-success);
    }

    .alert-warning {
        background-color: var(--color-warning-bg);
        border-color: var(--color-warning);
    }

    .alert-error {
        background-color: var(--color-error-bg);
        border-color: var(--color-error);
    }

    .alert-info {
        background-color: var(--color-info-bg);
        border-color: var(--color-info);
    }

    /* ============================================
       PROGRESS BARS
       ============================================ */

    .progress {
        background-color: var(--color-surface-elevated);
    }

    .progress-bar {
        background-color: var(--color-primary);
    }

    /* ============================================
       DIVIDERS
       ============================================ */

    hr,
    .divider {
        border-color: var(--color-border);
    }

    /* ============================================
       SCROLLBARS
       ============================================ */

    ::-webkit-scrollbar {
        width: 8px;
        height: 8px;
    }

    ::-webkit-scrollbar-track {
        background-color: var(--color-surface);
    }

    ::-webkit-scrollbar-thumb {
        background-color: var(--color-border-dark);
        border-radius: var(--radius-full);
    }

    ::-webkit-scrollbar-thumb:hover {
        background-color: var(--color-text-muted);
    }

    /* ============================================
       CODE BLOCKS
       ============================================ */

    code,
    pre {
        background-color: var(--color-surface-elevated);
        color: var(--color-primary-light);
    }

    pre {
        border-color: var(--color-border);
    }

    /* ============================================
       IMAGES & MEDIA
       ============================================ */

    img {
        opacity: 0.9;
    }

    img:hover {
        opacity: 1;
    }

    /* ============================================
       LOADING STATES
       ============================================ */

    .skeleton {
        background: linear-gradient(
            90deg,
            var(--color-surface-elevated) 25%,
            var(--color-surface-hover) 50%,
            var(--color-surface-elevated) 75%
        );
        background-size: 200% 100%;
    }

    .spinner {
        border-color: var(--color-border);
        border-top-color: var(--color-primary-light);
    }

    /* ============================================
       CHAT / MESSAGES
       ============================================ */

    .message-bubble {
        background-color: var(--color-surface-elevated);
        color: var(--color-text);
    }

    .message-bubble.sent {
        background-color: var(--color-primary);
        color: var(--color-text-inverse);
    }

    .message-time {
        color: var(--color-text-disabled);
    }

    /* ============================================
       UPLOAD ZONE
       ============================================ */

    .upload-zone {
        background-color: var(--color-surface-elevated);
        border-color: var(--color-border);
    }

    .upload-zone:hover,
    .upload-zone.dragover {
        border-color: var(--color-primary);
        background-color: rgba(59, 130, 246, 0.1);
    }

    .upload-zone-text {
        color: var(--color-text-muted);
    }

    /* ============================================
       EMPTY STATES
       ============================================ */

    .empty-state {
        color: var(--color-text-muted);
    }

    .empty-state-icon {
        color: var(--color-text-disabled);
    }

    /* ============================================
       STAT ICONS - ACCENT COLORS
       ============================================ */

    .stat-icon.blue { background: rgba(37, 99, 235, 0.15); color: var(--color-primary-light); }
    .stat-icon.green { background: var(--color-success-bg); color: var(--color-success-light); }
    .stat-icon.orange { background: var(--color-accent-orange-bg); color: var(--color-accent-orange); }
    .stat-icon.purple { background: var(--color-accent-purple-bg); color: var(--color-accent-purple); }
    .stat-icon.pink { background: var(--color-accent-pink-bg); color: var(--color-accent-pink); }
    .stat-icon.cyan { background: var(--color-accent-cyan-bg); color: var(--color-accent-cyan); }

    /* ============================================
       TAG WARNING CONTRAST FIX
       ============================================ */

    .tag-warning { background: var(--color-warning-bg); color: var(--color-warning-light); }
    .tag-danger { background: var(--color-error-bg); color: var(--color-error-light); }

    /* ============================================
       ALERT TEXT CONTRAST FIX
       ============================================ */

    .alert-info { color: var(--color-info-light); }
    .alert-success { color: var(--color-success-light); }
    .alert-warning { color: var(--color-warning-light); }
    .alert-danger { color: var(--color-error-light); }
}

/* ============================================
   TOGGLE DARK MODE BUTTON
   ============================================ */

.theme-toggle {
    position: relative;
    width: 56px;
    height: 28px;
    background-color: var(--color-surface-elevated);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-full);
    cursor: pointer;
    transition: var(--transition-base);
}

.theme-toggle::before {
    content: '';
    position: absolute;
    top: 2px;
    left: 2px;
    width: 22px;
    height: 22px;
    background-color: var(--color-primary);
    border-radius: 50%;
    transition: var(--transition-base);
}

.theme-toggle[data-active="true"]::before,
[data-theme="dark"] .theme-toggle::before {
    transform: translateX(28px);
}

.theme-toggle .icon-sun,
.theme-toggle .icon-moon {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    font-size: 14px;
    transition: var(--transition-base);
}

.theme-toggle .icon-sun {
    left: 6px;
    color: var(--color-warning);
}

.theme-toggle .icon-moon {
    right: 6px;
    color: var(--color-text-muted);
}

[data-theme="dark"] .theme-toggle .icon-sun {
    color: var(--color-text-disabled);
}

[data-theme="dark"] .theme-toggle .icon-moon {
    color: var(--color-primary-light);
}

/* ============================================
   TRANSITION DOUCE ENTRE THEMES
   ============================================ */

html.theme-transition,
html.theme-transition *,
html.theme-transition *::before,
html.theme-transition *::after {
    transition: background-color 0.3s ease,
                border-color 0.3s ease,
                color 0.3s ease,
                box-shadow 0.3s ease !important;
}
